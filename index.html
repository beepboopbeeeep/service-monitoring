<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙˆØ¶Ø¹ÛŒØª Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ø³Ø±ÙˆØ±Ù‡Ø§</title>
    <!-- Ù„ÙˆØ¯ Ú©Ø±Ø¯Ù† ÙÙˆÙ†Øª ÙˆØ²ÛŒØ±Ù…ØªÙ† Ø§Ø² CDN Ø§ÛŒØ±Ø§Ù†ÛŒ -->
    <link href="https://cdn.fontcdn.ir/Font/Persian/Vazirmatn/Vazirmatn-Regular.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.fontcdn.ir/Font/Persian/Vazirmatn/Vazirmatn-Bold.css" rel="stylesheet" type="text/css" />
    
    <!-- Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Chart.js Ø¨Ø±Ø§ÛŒ Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        :root {
            --bg-color: #1E1E1E;
            --accent-color: #C7A46C;
            --text-color: #E0E0E0;
            --card-bg: #2C2C2C;
            --success-color: #4CAF50;
            --warning-color: #FF9800;
            --danger-color: #F44336;
            --info-color: #2196F3;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            outline: none;
        }

        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding-bottom: 50px;
            min-height: 100vh;
        }

        /* Ù‡Ø¯Ø± */
        header {
            text-align: center;
            padding: 40px 20px;
            border-bottom: 1px solid #333;
            margin-bottom: 30px;
            background: linear-gradient(180deg, rgba(30,30,30,1) 0%, rgba(30,30,30,0.8) 100%);
        }

        h1 {
            color: var(--accent-color);
            font-size: 2.5rem;
            margin-bottom: 15px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        /* --- Ø§Ø³ØªØ§ÛŒÙ„ Ø²ÛŒØ¨Ø§ Ø¨Ø±Ø§ÛŒ Ø¨Ø®Ø´ Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ --- */
        .live-status-badge {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 8px 24px;
            background: rgba(199, 164, 108, 0.08); /* Ø´ÛŒØ´Ù‡â€ŒØ§ÛŒ Ø¨Ø§ Ø±Ù†Ú¯ ØªÙ… */
            border: 1px solid rgba(199, 164, 108, 0.3);
            border-radius: 50px;
            color: var(--accent-color);
            font-size: 0.95rem;
            font-weight: 500;
            backdrop-filter: blur(6px); /* Ø§ÙÚ©Øª Ø¨Ù„ÙˆØ± Ø´ÛŒØ´Ù‡â€ŒØ§ÛŒ */
            box-shadow: 0 4px 15px rgba(0,0,0,0.2), inset 0 0 10px rgba(199, 164, 108, 0.05);
            transition: all 0.3s ease;
            direction: rtl;
        }

        .live-status-badge:hover {
            background: rgba(199, 164, 108, 0.15);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(199, 164, 108, 0.2);
        }

        .pulse-indicator {
            position: relative;
            width: 10px;
            height: 10px;
            background-color: #4CAF50; /* Ø±Ù†Ú¯ Ø³Ø¨Ø² Ø¨Ø±Ø§ÛŒ Ù†Ø´Ø§Ù† Ø¯Ø§Ø¯Ù† Ø²Ù†Ø¯Ù‡ Ø¨ÙˆØ¯Ù† Ø³ÛŒØ³ØªÙ… */
            border-radius: 50%;
        }

        /* Ø¯Ø§ÛŒØ±Ù‡ Ù¾Ø´Øª Ø³Ø± Ø¯Ø§ÛŒØ±Ù‡ Ø§ØµÙ„ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÙÚ©Øª Ù…ÙˆØ¬ */
        .pulse-indicator::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            background-color: inherit;
            border-radius: 50%;
            animation: pulse-animation 2s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
            z-index: -1;
        }

        @keyframes pulse-animation {
            0% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7); }
            70% { transform: translate(-50%, -50%) scale(3); opacity: 0; box-shadow: 0 0 0 15px rgba(76, 175, 80, 0); }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
        }
        /* --- Ù¾Ø§ÛŒØ§Ù† Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø¬ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ --- */

        /* Ú©Ø§Ù†ØªÛŒÙ†Ø± Ø§ØµÙ„ÛŒ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Ø¨Ø®Ø´ Ø±Ø§Ù‡Ù†Ù…Ø§ Ùˆ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ */
        .info-box {
            background: rgba(199, 164, 108, 0.05);
            border: 1px solid rgba(199, 164, 108, 0.2);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }

        .info-box::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 4px;
            height: 100%;
            background: var(--accent-color);
        }

        .info-title {
            color: var(--accent-color);
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .info-content ul {
            list-style: none;
        }

        .info-content li {
            margin-bottom: 10px;
            padding-right: 20px;
            position: relative;
        }

        .info-content li::before {
            content: 'â€¢';
            color: var(--accent-color);
            position: absolute;
            right: 0;
            font-weight: bold;
        }

        .referral-banner {
            margin-top: 20px;
            background: linear-gradient(45deg, #1a1a1a, #2a2a2a);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #444;
            color: var(--accent-color);
            font-weight: bold;
        }

        /* Ú¯Ø±ÛŒØ¯ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }

        .service-card {
            background-color: var(--card-bg);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(199, 164, 108, 0.15);
            border-color: rgba(199, 164, 108, 0.3);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .service-name {
            font-size: 1.3rem;
            font-weight: bold;
        }

        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        .status-active { background-color: var(--success-color); }
        .status-load { background-color: var(--warning-color); }
        .status-inactive { background-color: var(--danger-color); }

        .renewal-info {
            background: rgba(0,0,0,0.2);
            padding: 10px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 0.9rem;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .renewal-date {
            display: flex;
            justify-content: space-between;
        }

        /* Ø±Ù†Ú¯â€ŒÙ‡Ø§ÛŒ ÙˆØ¶Ø¹ÛŒØª ØªÙ…Ø¯ÛŒØ¯ */
        .text-safe { color: #4CAF50; }
        .text-warning { color: #FFEB3B; } /* Ø²Ø±Ø¯ */
        .text-critical { color: #FF9800; } /* Ù†Ø§Ø±Ù†Ø¬ÛŒ */
        .text-expired { color: #F44336; font-weight: bold; } /* Ù‚Ø±Ù…Ø² */

        .status-message {
            margin-top: 15px;
            font-size: 0.9rem;
            padding: 10px;
            border-radius: 6px;
            background: rgba(255,255,255,0.05);
        }

        /* Ø¨Ø®Ø´ Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ */
        .charts-section {
            margin-top: 50px;
        }

        .chart-container {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 30px;
            height: 350px;
            position: relative;
        }

        .chart-title {
            text-align: center;
            margin-bottom: 20px;
            color: var(--accent-color);
            font-size: 1.1rem;
        }

        /* Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ */
        @media (max-width: 600px) {
            h1 { font-size: 1.8rem; }
            .service-card { padding: 15px; }
            .live-status-badge { padding: 6px 15px; font-size: 0.85rem; }
        }

        /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ù„ÙˆØ¯ÛŒÙ†Ú¯ */
        .loading-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s;
        }
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(199, 164, 108, 0.3);
            border-top: 5px solid var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    </style>
</head>
<body>

    <!-- ØµÙØ­Ù‡ Ù„ÙˆØ¯ÛŒÙ†Ú¯ -->
    <div id="loading" class="loading-overlay">
        <div class="spinner"></div>
    </div>

    <header>
        <h1>ÙˆØ¶Ø¹ÛŒØª Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ø³Ø±ÙˆØ±Ù‡Ø§</h1>
        <!-- Ø¨Ø¬ Ø¬Ø¯ÛŒØ¯ Ù†Ù…Ø§ÛŒØ´ Ø²Ù…Ø§Ù† Ø¨Ø§ Ø§ÙÚ©Øª Ø²ÛŒØ¨Ø§ -->
        <div class="live-status-badge">
            <div class="pulse-indicator"></div>
            <span id="update-time-display">Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª...</span>
        </div>
    </header>

    <div class="container">
        
        <!-- Ø¨Ø®Ø´ Ø±Ø§Ù‡Ù†Ù…Ø§ Ùˆ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ -->
        <section class="info-box">
            <div class="info-title">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                Ù†Ú©Ø§Øª Ù…Ù‡Ù… Ùˆ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
            </div>
            <div class="info-content">
                <ul>
                    <li><strong>ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ø§Ù„:</strong> ØªØ¨Ø±ÛŒÚ©! Ø³Ø±ÙˆÛŒØ³ Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø± Ø­Ø§Ù„ ÙØ¹Ø§Ù„ÛŒØª Ø§Ø³Øª.</li>
                    <li><strong>Ø³Ù†Ú¯ÛŒÙ†ÛŒ Ø¨Ø§Ø±:</strong> Ø§Ú¯Ø± Ø¨Ø§ Ø§ÛŒÙ† Ù¾ÛŒØ§Ù… Ù…ÙˆØ§Ø¬Ù‡ Ø´Ø¯ÛŒØ¯ Ø§ØµÙ„Ø§ Ù†Ú¯Ø±Ø§Ù† Ù†Ø¨Ø§Ø´ÛŒØ¯. Ø§ÛŒÙ† ÛŒÚ© Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ù…ÙˆÙ‚Øª Ø§Ø³Øª. Ù„Ø·ÙØ§Ù‹ ØªØ§ Ø³Ø§Ø¹Øª <strong>Û³:Û³Û° ØªØ§ Û´ Ø¨Ø§Ù…Ø¯Ø§Ø¯ Ø¨Ù‡ ÙˆÙ‚Øª Ø§ÛŒØ±Ø§Ù†</strong> ØµØ¨Ø± Ú©Ù†ÛŒØ¯ ØªØ§ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø¨Ø§Ø± Ø³Ø±ÙˆØ±Ù‡Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© Ø±ÛŒØ³Øª Ùˆ Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø´ÙˆØ¯.</li>
                    <li><strong>ÙˆØ¶Ø¹ÛŒØª ØºÛŒØ±ÙØ¹Ø§Ù„:</strong> Ø¯Ø± ØµÙˆØ±Øª Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø§ÛŒÙ† ÙˆØ¶Ø¹ÛŒØªØŒ Ù„Ø·ÙØ§Ù‹ Ø³Ø±ÛŒØ¹Ø§Ù‹ Ø¨Ø§ <strong>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</strong> ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±ÛŒØ¯.</li>
                    <li><strong>ØªÙ…Ø¯ÛŒØ¯ Ùˆ Ù‚Ø·Ø¹ÛŒ:</strong> Ø³Ø¹ÛŒ Ú©Ù†ÛŒØ¯ ØªØ§ Ù‚Ø¨Ù„ Ø§Ø² Ù¾Ø§ÛŒØ§Ù† ØªØ§Ø±ÛŒØ® ØªÙ…Ø¯ÛŒØ¯ØŒ Ø§Ù‚Ø¯Ø§Ù… Ú©Ù†ÛŒØ¯. Ø¯Ø± ØµÙˆØ±Øª Ø¨Ø±ÙˆØ² Ù‡Ø± Ú¯ÙˆÙ†Ù‡ Ù‚Ø·Ø¹ÛŒ ÛŒØ§ Ø§Ø®ØªÙ„Ø§Ù„ØŒ Ø±ÙˆØ²Ù‡Ø§ÛŒ Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡ Ø¨Ù‡ Ø³Ø±ÙˆÛŒØ³ Ø´Ù…Ø§ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ù†Ú¯Ø±Ø§Ù† Ø¶Ø±Ø± Ú©Ø±Ø¯Ù† Ù¾ÙˆÙ„ØªØ§Ù† Ù†Ø¨Ø§Ø´ÛŒØ¯.</li>
                </ul>
                <div class="referral-banner">
                    ğŸ Ø¨Ø§ Ù…Ø¹Ø±ÙÛŒ Ø¯ÙˆØ³ØªØ§Ù† Ø®ÙˆØ¯ Ø¨Ù‡ Ù…Ø§ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ ÙˆØ§Ø¬Ø¯ Ø´Ø±Ø§ÛŒØ· ØªØ®ÙÛŒÙ ØªÙ…Ø¯ÛŒØ¯ Ø³Ø±ÙˆÛŒØ³ Ù…Ø§Ù‡ÛŒØ§Ù†Ù‡ Ø´ÙˆÛŒØ¯!
                </div>
            </div>
        </section>

        <!-- Ù„ÛŒØ³Øª Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ -->
        <div id="servicesGrid" class="services-grid">
            <!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ ØªÙˆØ³Ø· Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
        </div>

        <!-- Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ -->
        <section class="charts-section">
            <div class="chart-container">
                <div class="chart-title">Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆØ¶Ø¹ÛŒØª Ù‡ÙØªÚ¯ÛŒ (Telegram Style)</div>
                <canvas id="weeklyChart"></canvas>
            </div>
            <div class="chart-container">
                <div class="chart-title">Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆØ¶Ø¹ÛŒØª Ù…Ø§Ù‡Ø§Ù†Ù‡</div>
                <canvas id="monthlyChart"></canvas>
            </div>
        </section>

    </div>

    <script>
        // ==========================================
        // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ùˆ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
        // ==========================================
        
        /**
         * Ù†Ú©ØªÙ‡ Ø¨Ø±Ø§ÛŒ ÙˆÛŒØ±Ø§ÛŒØ´:
         * Ø¨Ø±Ø§ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø³Ø±ÙˆÛŒØ³ Ø¬Ø¯ÛŒØ¯ØŒ ÛŒÚ© Ø¢Ø¨Ø¬Ú©Øª Ø¬Ø¯ÛŒØ¯ Ø¨Ù‡ Ø¢Ø±Ø§ÛŒÙ‡ Ø²ÛŒØ± Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯.
         * date ØªØ§Ø±ÛŒØ® ØªÙ…Ø¯ÛŒØ¯ Ø¨Ù‡ ÙØ±Ù…Øª YYYY/M/D (Ø´Ù…Ø³ÛŒ) Ø§Ø³Øª.
         * Ø§Ú¯Ø± ØªØ§Ø±ÛŒØ® Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯ Ø§Ø³ØªØŒ ØªØ§Ø±ÛŒØ®ÛŒ Ù†Ú†ÛŒØ³ÛŒØ¯ ÛŒØ§ null Ø¨Ú¯Ø°Ø§Ø±ÛŒØ¯.
         */
        const servicesConfig = [
            {
                id: 'central',
                name: 'Ø³Ø±ÙˆÛŒØ³ Ù…Ø±Ú©Ø²ÛŒ',
                url: 'https://tellmeimright.taxyvy.workers.dev/panel',
                renewalDate: null, // Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯
                color: '#C7A46C' // Ø±Ù†Ú¯ Ù…Ø®ØµÙˆØµ Ù†Ù…ÙˆØ¯Ø§Ø±
            },
            {
                id: 'sultan',
                name: 'Ø³Ø±ÙˆÛŒØ³ Ø³Ù„Ø·Ø§Ù†',
                url: 'https://hitmeintheyes.judiopu.workers.dev/panel',
                renewalDate: '1404/12/21', // ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ
                color: '#9C27B0' // Ø±Ù†Ú¯ Ù…Ø®ØµÙˆØµ Ù†Ù…ÙˆØ¯Ø§Ø±
            }
        ];

        // ==========================================
        // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ØµÙ„ÛŒ
        // ==========================================
        
        // Ø§Ú¯Ø± Ø§ÛŒÙ† Ú¯Ø²ÛŒÙ†Ù‡ true Ø¨Ø§Ø´Ø¯ØŒ ØµÙØ­Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø®ØªÚ¯ÛŒ (Demo) Ù†Ù…Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.
        // Ù¾Ø³ Ø§Ø² Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ GitHub ActionsØŒ Ø§ÛŒÙ† Ù…Ù‚Ø¯Ø§Ø± Ø±Ø§ Ø¨Ù‡ false ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯.
        const USE_DEMO_DATA = false; 
        const STATUS_DATA_URL = './status-data.json'; // Ø¢Ø¯Ø±Ø³ ÙØ§ÛŒÙ„ÛŒ Ú©Ù‡ Ø§Ú©Ø´Ù† ØªÙˆÙ„ÛŒØ¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯

        // ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø¯Ø§Ø¯ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ø¨Ù‡ ÙØ§Ø±Ø³ÛŒ
        function toPersianNum(num) {
            const farsiDigits = ['Û°', 'Û±', 'Û²', 'Û³', 'Û´', 'Ûµ', 'Û¶', 'Û·', 'Û¸', 'Û¹'];
            return num.toString().replace(/\d/g, x => farsiDigits[x]);
        }

        // ==========================================
        // Ù…Ù†Ø·Ù‚ ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ Ùˆ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø±ÙˆØ²Ù‡Ø§ÛŒ Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡
        // ==========================================
        
        function getDaysRemaining(jalaliDateStr) {
            if (!jalaliDateStr) return { days: 9999, text: 'Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯', className: 'text-safe' };

            const parts = jalaliDateStr.split('/').map(Number);
            const jy = parts[0];
            const jm = parts[1];
            const jd = parts[2];

            // ØªØ¨Ø¯ÛŒÙ„ ØªÙ‚Ø±ÛŒØ¨ÛŒ Ø´Ù…Ø³ÛŒ Ø¨Ù‡ Ù…ÛŒÙ„Ø§Ø¯ÛŒ (Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø±ÙˆØ²)
            const gy = jy + 1595;
            const days = -355668 + (365 * gy) + Math.floor(gy / 33) * 8 + Math.floor(((gy % 33) + 3) / 4) +
                         jd + (jm < 7 ? (jm - 1) * 31 : ((jm - 7) * 30) + 186);
            
            const targetDate = new Date(days * 86400000);
            const today = new Date();
            
            // Ø­Ø°Ù Ø§Ø®ØªÙ„Ø§Ù Ø³Ø§Ø¹Øª Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¯Ù‚ÛŒÙ‚ Ø±ÙˆØ²
            today.setHours(0,0,0,0);
            targetDate.setHours(0,0,0,0);

            const diffTime = targetDate - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

            let resultText = '';
            let resultClass = '';

            if (diffDays > 10) {
                resultText = `${toPersianNum(diffDays)} Ø±ÙˆØ² Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡`;
                resultClass = 'text-safe';
            } else if (diffDays > 0 && diffDays <= 10) {
                resultText = `${toPersianNum(diffDays)} Ø±ÙˆØ² Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡ (Ù†Ø²Ø¯ÛŒÚ© Ø¨Ù‡ ØªÙ…Ø¯ÛŒØ¯)`;
                resultClass = 'text-warning'; // Ø²Ø±Ø¯
            } else if (diffDays === 0) {
                resultText = `Ø±ÙˆØ² ØªÙ…Ø¯ÛŒØ¯ Ø³Ø±ÙˆÛŒØ³`;
                resultClass = 'text-critical'; // Ù†Ø§Ø±Ù†Ø¬ÛŒ
            } else {
                resultText = `${toPersianNum(Math.abs(diffDays))}`; // Ø¹Ø¯Ø¯ Ù…Ù†ÙÛŒ
                resultClass = 'text-expired'; // Ù‚Ø±Ù…Ø²
            }

            return { days: diffDays, text: resultText, className: resultClass };
        }

        // ==========================================
        // Ø¢Ù¾Ø¯ÛŒØª Ú©Ø±Ø¯Ù† Ù†Ù…Ø§ÛŒØ´ Ø²Ù…Ø§Ù† (Ø¨Ø®Ø´ Ø¬Ø¯ÛŒØ¯)
        // ==========================================
        function updateLastUpdateTime() {
            const now = new Date();
            // Ø¯Ø±ÛŒØ§ÙØª Ø²Ù…Ø§Ù† Ø´Ù…Ø³ÛŒ Ú©Ø§Ù…Ù„
            const timeStr = now.toLocaleTimeString('fa-IR', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
            const dateStr = now.toLocaleDateString('fa-IR');
            
            const element = document.getElementById('update-time-display');
            if(element) {
                element.innerHTML = `Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: ${dateStr} - Ø³Ø§Ø¹Øª ${timeStr}`;
            }
        }

        // ==========================================
        // Ø¯Ø±ÛŒØ§ÙØª ÙˆØ¶Ø¹ÛŒØª Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
        // ==========================================

        async function fetchStatuses() {
            document.getElementById('loading').style.display = 'flex';

            let data = [];

            if (USE_DEMO_DATA) {
                // ØªÙˆÙ„ÛŒØ¯ Ø¯Ø§Ø¯Ù‡ Ø¯Ù…Ùˆ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¸Ø§Ù‡Ø±
                console.log("Ø¯Ø± Ø­Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ù…Ùˆ...");
                await new Promise(r => setTimeout(r, 1000)); // ØªØ§Ø®ÛŒØ± Ù…ØµÙ†ÙˆØ¹ÛŒ
                
                data = servicesConfig.map(svc => {
                    const rand = Math.random();
                    let status = 'active';
                    if (rand > 0.7) status = 'load';
                    if (rand > 0.9) status = 'inactive';
                    return { id: svc.id, status: status };
                });
            } else {
                // ØªÙ„Ø§Ø´ Ø¨Ø±Ø§ÛŒ Ø®ÙˆØ§Ù†Ø¯Ù† Ø§Ø² ÙØ§ÛŒÙ„ JSON ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· GitHub Action
                try {
                    const response = await fetch(STATUS_DATA_URL + '?t=' + new Date().getTime());
                    if (!response.ok) throw new Error("ÙØ§ÛŒÙ„ ÙˆØ¶Ø¹ÛŒØª ÛŒØ§ÙØª Ù†Ø´Ø¯");
                    data = await response.json();
                } catch (e) {
                    console.warn("Ø¯Ø±ÛŒØ§ÙØª Ø§Ø² ÙØ§ÛŒÙ„ JSON Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯. ØªÙ„Ø§Ø´ Ø¨Ø±Ø§ÛŒ ÙÛŒØ¯Ø± Ù…Ø³ØªÙ‚ÛŒÙ… (CORS Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù…Ø³Ø¯ÙˆØ¯ Ø´ÙˆØ¯)...");
                    // ÙØ§Ù„â€ŒØ¨Ú©: ØªÙ„Ø§Ø´ Ù…Ø³ØªÙ‚ÛŒÙ… (Ø§Ø­ØªÙ…Ø§Ù„Ø§ Ø¨Ù‡ Ø®Ø§Ø·Ø± CORS ÙÛŒÙ„ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ø§Ù…Ø§ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ø§Ø³Øª)
                    data = await Promise.all(servicesConfig.map(async (svc) => {
                        try {
                            const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(svc.url)}`;
                            const res = await fetch(proxyUrl);
                            const json = await res.json();
                            const content = json.contents;
                            
                            let status = 'inactive';
                            if (content.includes('panel')) status = 'active';
                            else if (content.includes('rate') || content.includes('1027')) status = 'load';
                            
                            return { id: svc.id, status: status };
                        } catch (err) {
                            return { id: svc.id, status: 'error' };
                        }
                    }));
                }
            }

            // ØµØ¯Ø§ Ø²Ø¯Ù† ØªØ§Ø¨Ø¹ Ø¢Ù¾Ø¯ÛŒØª Ø²Ù…Ø§Ù†
            updateLastUpdateTime(); 

            renderServices(data);
            renderCharts(data);
            document.getElementById('loading').style.opacity = '0';
            setTimeout(() => document.getElementById('loading').style.display = 'none', 500);
        }

        // ==========================================
        // Ø±Ù†Ø¯Ø± Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
        // ==========================================

        function renderServices(statusData) {
            const grid = document.getElementById('servicesGrid');
            grid.innerHTML = '';

            servicesConfig.forEach(svc => {
                const statusInfo = statusData.find(s => s.id === svc.id) || { status: 'unknown' };
                const renewalInfo = getDaysRemaining(svc.renewalDate);
                
                let statusLabel = '';
                let statusClass = '';
                let message = '';

                switch(statusInfo.status) {
                    case 'active':
                        statusLabel = 'ÙØ¹Ø§Ù„ Ùˆ Ø¢Ù†Ù„Ø§ÛŒÙ†';
                        statusClass = 'status-active';
                        message = 'Ø³Ø±ÙˆÛŒØ³ Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø± Ø­Ø§Ù„ ÙØ¹Ø§Ù„ÛŒØª Ø§Ø³Øª.';
                        break;
                    case 'load':
                        statusLabel = 'Ø³Ù†Ú¯ÛŒÙ†ÛŒ Ø¨Ø§Ø±';
                        statusClass = 'status-load';
                        message = 'Ù†Ú¯Ø±Ø§Ù† Ù†Ø¨Ø§Ø´ÛŒØ¯ØŒ Ù…Ù†ØªØ¸Ø± Ø¨Ù…Ø§Ù†ÛŒØ¯ ØªØ§ Ø³Ø§Ø¹Øª Û³:Û³Û° ØªØ§ Û´ Ø¨Ø§Ù…Ø¯Ø§Ø¯ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø±ÛŒØ³Øª Ø´ÙˆØ¯.';
                        break;
                    case 'inactive':
                    case 'error':
                    default:
                        statusLabel = 'ØºÛŒØ±ÙØ¹Ø§Ù„';
                        statusClass = 'status-inactive';
                        message = 'Ø³Ø±ÙˆÛŒØ³ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø´Ø¯Ù‡ Ø§Ø³Øª. Ù„Ø·ÙØ§Ù‹ Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±ÛŒØ¯.';
                        break;
                }

                const card = document.createElement('div');
                card.className = 'service-card';
                card.innerHTML = `
                    <div class="card-header">
                        <div class="service-name">${svc.name}</div>
                        <span class="status-badge ${statusClass}">${statusLabel}</span>
                    </div>
                    
                    <div class="renewal-info">
                        <div class="renewal-date">
                            <span>ÙˆØ¶Ø¹ÛŒØª ØªÙ…Ø¯ÛŒØ¯:</span>
                            <span class="${renewalInfo.className}">
                                ${renewalInfo.days < 0 ? 'Ø§Ù†Ù‚Ø¶Ø§: ' + renewalInfo.text : renewalInfo.text}
                            </span>
                        </div>
                        ${svc.renewalDate ? `<div style="font-size:0.8em; opacity:0.7; text-align:left;">ØªØ§Ø±ÛŒØ®: ${svc.renewalDate}</div>` : ''}
                    </div>

                    <div class="status-message">
                        ${message}
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // ==========================================
        // Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ (Chart.js)
        // ==========================================

        function renderCharts(currentData) {
            // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù†Ù…ÙˆØ¯Ø§Ø± Ø§Ø³ØªØ§ÛŒÙ„ ØªÙ„Ú¯Ø±Ø§Ù…
            Chart.defaults.color = '#888';
            Chart.defaults.font.family = 'Vazirmatn';
            
            const commonOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        labels: {
                            color: '#E0E0E0',
                            usePointStyle: true,
                        }
                    }
                },
                scales: {
                    x: {
                        grid: { display: false, drawBorder: false },
                        ticks: { color: '#666' }
                    },
                    y: {
                        grid: { color: '#333', drawBorder: false },
                        ticks: { display: false } 
                    }
                },
                elements: {
                    line: { tension: 0.4 }, 
                    point: { radius: 0, hitRadius: 10 } 
                }
            };

            // ØªÙˆÙ„ÛŒØ¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø®ØªÚ¯ÛŒ Ø¨Ø±Ø§ÛŒ ØªØ§Ø±ÛŒØ®Ú†Ù‡ (Ú†ÙˆÙ† backend ÙˆØ§Ù‚Ø¹ÛŒ Ù†Ø¯Ø§Ø±ÛŒÙ…)
            const generateHistory = (baseStatus) => {
                const data = [];
                const labels = [];
                const now = new Date();
                for (let i = 6; i >= 0; i--) {
                    const d = new Date();
                    d.setDate(now.getDate() - i);
                    labels.push(i === 0 ? 'Ø§Ù…Ø±ÙˆØ²' : d.toLocaleDateString('fa-IR'));
                    let val = baseStatus === 'active' ? 95 : (baseStatus === 'load' ? 60 : 20);
                    val += Math.floor(Math.random() * 10 - 5); 
                    data.push(val);
                }
                return { labels, data };
            };

            const datasets = servicesConfig.map((svc, index) => {
                const currentStatus = currentData.find(s => s.id === svc.id)?.status || 'active';
                const history = generateHistory(currentStatus);
                
                const ctx = document.createElement('canvas').getContext('2d');
                const gradient = ctx.createLinearGradient(0, 0, 0, 400);
                gradient.addColorStop(0, svc.color + '80'); 
                gradient.addColorStop(1, svc.color + '05'); 

                return {
                    label: svc.name,
                    data: history.data,
                    borderColor: svc.color,
                    backgroundColor: gradient,
                    fill: true,
                    borderWidth: 2
                };
            });

            const weekLabels = generateHistory().labels;
            const monthLabels = Array.from({length: 30}, (_, i) => i + 1).map(n => toPersianNum(n));

            new Chart(document.getElementById('weeklyChart'), {
                type: 'line',
                data: {
                    labels: weekLabels,
                    datasets: datasets
                },
                options: {
                    ...commonOptions,
                    interaction: { mode: 'index', intersect: false }
                }
            });

            new Chart(document.getElementById('monthlyChart'), {
                type: 'line',
                data: {
                    labels: monthLabels,
                    datasets: datasets.map(ds => ({
                        ...ds,
                        data: Array(30).fill(0).map(() => ds.data[Math.floor(Math.random() * ds.data.length)])
                    }))
                },
                options: commonOptions
            });
        }

        // Ø§Ø¬Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        fetchStatuses();
        // Ø±ÙØ±Ø´ Ø®ÙˆØ¯Ú©Ø§Ø± Ù‡Ø± 5 Ø¯Ù‚ÛŒÙ‚Ù‡
        setInterval(fetchStatuses, 300000);

    </script>
</body>
</html>
